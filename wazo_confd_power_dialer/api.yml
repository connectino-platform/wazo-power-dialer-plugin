paths:
  /powerdialer/campaigns:
    get:
      summary: List campaign
      description: '**Required ACL:** `confd.powerdialer.campaigns.read`'
      tags:
        - campaigns
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/recurse'
        - $ref: '#/parameters/order'
        - $ref: '#/parameters/direction'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
        - $ref: '#/parameters/search'
      responses:
        '200':
          description: campaigns list
          schema:
            $ref: '#/definitions/CampaignItems'
    post:
      summary: Create campaign
      description: '**Required ACL:** `confd.powerdialer.campaigns.create`'
      tags:
        - campaigns
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - name: body
          in: body
          description: Campaign to create
          required: true
          schema:
            $ref: '#/definitions/Campaign'
      responses:
        '201':
          description: Campaign created
          schema:
            $ref: '#/definitions/Campaign'
        '400':
          $ref: '#/responses/CreateError'

  /campaigns/{campaign_uuid}:
    get:
      summary: Get campaign
      description: '**Required ACL:** `confd.powerdialer.campaigns.{uuid}.read`'
      tags:
        - campaigns
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/campaignuuid'
      responses:
        '200':
          description: Campaign
          schema:
            $ref: '#/definitions/Campaign'
        '404':
          $ref: '#/responses/NotFoundError'
    put:
      summary: Update campaign
      description: '**Required ACL:** `confd.powerdialer.campaigns.{uuid}.update`'
      tags:
        - campaigns
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/campaignuuid'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Campaign'
      responses:
        '204':
          $ref: '#/responses/ResourceUpdated'
        '400':
          $ref: '#/responses/UpdateError'
        '404':
          $ref: '#/responses/NotFoundError'
    delete:
      summary: Delete campaign
      description: '**Required ACL:** `confd.powerdialer.campaigns.{uuid}.delete`'
      tags:
        - campaigns
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/campaignuuid'
      responses:
        '204':
          $ref: '#/responses/ResourceDeleted'
        '400':
          $ref: '#/responses/DeleteError'
        '404':
          $ref: '#/responses/NotFoundError'



  /powerdialer/contacts:
    get:
      summary: List contact
      description: '**Required ACL:** `confd.powerdialer.contacts.read`'
      tags:
        - contacts
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/recurse'
        - $ref: '#/parameters/order'
        - $ref: '#/parameters/direction'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
        - $ref: '#/parameters/search'
      responses:
        '200':
          description: contacts list
          schema:
            $ref: '#/definitions/ContactItems'
    post:
      summary: Create contact
      description: '**Required ACL:** `confd.powerdialer.contacts.create`'
      tags:
        - contacts
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - name: body
          in: body
          description: Contact to create
          required: true
          schema:
            $ref: '#/definitions/Contact'
      responses:
        '201':
          description: Contact created
          schema:
            $ref: '#/definitions/Contact'
        '400':
          $ref: '#/responses/CreateError'

  /contacts/{contact_uuid}:
    get:
      summary: Get contact
      description: '**Required ACL:** `confd.powerdialer.contacts.{uuid}.read`'
      tags:
        - contacts
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/contactuuid'
      responses:
        '200':
          description: Contact
          schema:
            $ref: '#/definitions/Contact'
        '404':
          $ref: '#/responses/NotFoundError'
    put:
      summary: Update contact
      description: '**Required ACL:** `confd.powerdialer.contacts.{uuid}.update`'
      tags:
        - contacts
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/contactuuid'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Contact'
      responses:
        '204':
          $ref: '#/responses/ResourceUpdated'
        '400':
          $ref: '#/responses/UpdateError'
        '404':
          $ref: '#/responses/NotFoundError'
    delete:
      summary: Delete contact
      description: '**Required ACL:** `confd.powerdialer.contacts.{uuid}.delete`'
      tags:
        - contacts
      parameters:
        - $ref: '#/parameters/tenantuuid'
        - $ref: '#/parameters/contactuuid'
      responses:
        '204':
          $ref: '#/responses/ResourceDeleted'
        '400':
          $ref: '#/responses/DeleteError'
        '404':
          $ref: '#/responses/NotFoundError'

parameters:
  campaignuuid:
    required: true
    type: string
    name: campaign_uuid
    in: path
    description: Campaign's UUID

  contactuuid:
    required: true
    type: string
    name: contact_uuid
    in: path
    description: Contact's UUID

definitions:
  Campaign:
    title: Campaign
    allOf:
      - properties:
          uuid:
            type: string
            format: uuid
            readOnly: true
          name:
            type: string
          status:
            type: string
            enum: [active, inactive]
          schedule_start_date:
            type: string
            format: date
          schedule_start_time:
            type: string
            format: date
          answer_wait_time:
            type: integer
          after_call_dialing_auto:
            type: boolean
          after_call_time:
            type: integer
          is_recording :
            type: boolean
          attempts :
            type: integer
          attempts_interval:
            type: integer


  CampaignItems:
    title: CampaignItems
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/Campaign'
      total:
        type: integer
    required:
      - total

  Contact:
    title: Contact
    allOf:
      - properties:
          uuid:
            type: string
            format: uuid
            readOnly: true
          name:
            type: string
          family:
            type: string
          phone:
            type: string
          email:
            type: string
          email2:
            type: string
          title:
            type: string
          company:
            type: string
          address:
            type: string


  ContactItems:
    title: ContactItems
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/Contact'
      total:
        type: integer
    required:
      - total


